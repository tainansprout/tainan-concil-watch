{"version":3,"sources":["webpack:///./libs/utils.js","webpack:///./components/SingleInterpellationPdf.vue?8511","webpack:///./components/InterpellationCard.vue?95b2","webpack:///./components/InterpellationCard.vue?7369","webpack:///./components/InterpellationCard.vue","webpack:///./components/InterpellationCard.vue?2fc8","webpack:///./components/InterpellationSrcViewer.vue?201a","webpack:///./components/SingleInterpellationPdf.vue?b5aa","webpack:///./components/SingleInterpellationPdf.vue?f381","webpack:///./components/SingleInterpellationPdf.vue?a79e","webpack:///./components/SingleInterpellationPdf.vue?6699","webpack:///./components/SingleInterpellationPdf.vue","webpack:///./components/SingleInterpellationPdf.vue?13e5","webpack:///./components/InterpellationSrcViewer.vue?f47f","webpack:///./components/InterpellationSrcViewer.vue?ae6c","webpack:///./components/InterpellationCard.vue?2385","webpack:///./components/InterpellationSrcViewer.vue?175f","webpack:///./components/InterpellationSrcViewer.vue","webpack:///./components/InterpellationSrcViewer.vue?e318","webpack:///./components/InterpellationSrcViewer.vue?d37f","webpack:///./components/InterpellationCard.vue?d400","webpack:///./components/InterpellationCard.vue?13bc"],"names":["PARTY_MAP","PARTY_LIST","reduce","accu","party","abbr","name","stringifyTownList","townList","townStr","join","endsWith","normalizeParty","avatar","theParty","find","p","Error","date","dateString","dayjs","format","scrollTo","el","offset","offsetTop","NAV_HEIGHT","setTimeout","window","top","behavior","number2zh","number","nthRegex","isNth","toString","match","replace","zh","NUMBER_2_ZH","content","__esModule","default","module","i","locals","exports","add","props","councilorMap","type","Object","required","sayit","computed","councilor","this","councilorId","district","districtTitle","roundLabel","councilorRound","DEFAULT_ROUND","meetingRound","round","canViewPdf","src","methods","gotoPdf","$refs","srcViewer","show","component","_vm","_h","$createElement","_c","_self","staticClass","class","pointer","on","_v","_s","summary","say","editorNote","_e","$event","stopPropagation","apply","arguments","attrs","ref","installComponents","TcwIcon","InterpellationSrcViewer","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","push","document","page","Number","highlight","String","noScroll","Boolean","mounted","renderPdf","pdfjsViewer","eventBus","EventBus","viewerConfig","container","parentElement","viewer","linkService","PDFLinkService","findController","PDFFindController","pdfSinglePageViewer","PDFSinglePageViewer","setViewer","_setScale","dispatch","query","phraseSearch","highlightAll","scrollTop","currentPageNumber","$emit","_setCurrentPageNumber","setDocument","PDFJS_BASE","components","InfiniteLoading","startPage","meetingType","data","isLibLoaded","isPageMounted","isOpenedPending","isOpened","pdfLibTimer","pageChunk","mainPage","headPages","headLoadingState","tailPages","tailLoadingState","head","link","rel","href","isMainReady","isRenderReady","pdfLinkBase","meetingRoundStr","padStart","highlightHead","split","length","slice","watch","renderMainPage","checkPdfLibReadiness","beforeDestroy","clearTimeout","handlePageClick","e","target","closest","hide","$nextTick","keepCheckingPdfLibRediness","pdfjsLib","GlobalWorkerOptions","workerSrc","preparePdf","pageIndex","CMAP_URL","pageOffset","chunkIndex","getPageChunkIndex","getDocument","url","cMapUrl","cMapPacked","enableXfa","promise","pdfDocument","pdf","Math","ceil","markLoadingDone","isTail","loaded","loadMore","$state","nextPage","id","unshift","db","dn","slot","_l","_b","key","nativeOn","SingleInterpellationPdf"],"mappings":"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","file":"2b1bd5e.js","sourcesContent":["import dayjs from 'dayjs'\nimport { NAV_HEIGHT, NUMBER_2_ZH } from './defs'\nimport { partyList as PARTY_LIST } from '~/content/meta/partyList.json'\n\nconst PARTY_MAP = PARTY_LIST.reduce((accu, party) => {\n  accu[party.abbr || party.name] = party\n  return accu\n}, {})\n\nexport function stringifyTownList (townList) {\n  let townStr = townList.join('.')\n  if (!townStr.endsWith('區')) {\n    townStr += '區'\n  }\n  return townStr\n}\n\nexport function normalizeParty (party) {\n  if (!party) {\n    return undefined\n  }\n  if (party.name && party.avatar) {\n    return party\n  }\n  let theParty = PARTY_MAP[party]\n  if (!theParty) {\n    theParty = PARTY_LIST.find(p => p.name === party)\n  }\n  if (!theParty) {\n    throw new Error(`Undefined party: ${party}`)\n  }\n  return theParty\n}\n\nexport function date (dateString) {\n  return dayjs(dateString).format('YYYY.MM.DD')\n}\n\nexport function scrollTo (el) {\n  if (!el) {\n    return\n  }\n  const offset = el.offsetTop - NAV_HEIGHT\n  setTimeout(() => {\n    window.scrollTo({\n      top: offset,\n      behavior: 'smooth'\n    })\n  })\n}\n\nexport function number2zh (number) {\n  number = number.toString()\n  const nthRegex = /st|nd|rd|th/\n  const isNth = number.match(nthRegex)\n  number = number.replace(nthRegex, '')\n  const zh = NUMBER_2_ZH[number]\n\n  if (!zh) {\n    throw new Error(`Undefined number: ${number}`)\n  }\n  if (isNth) {\n    return `第${zh}`\n  }\n  return zh\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleInterpellationPdf.vue?vue&type=style&index=0&id=4dc5e1d9&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"44d1aa98\", content, true, {\"sourceMap\":false});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"intCard\",class:{pointer: _vm.canViewPdf},on:{\"click\":_vm.gotoPdf}},[_c('div',{staticClass:\"intCard__meta flex-ns flex-row-reverse justify-between ls3\"},[_c('div',{staticClass:\"f6 gray\"},[_vm._v(_vm._s(_vm.sayit.date))]),_c('div',{staticClass:\"mt3 mt0-ns\"},[_c('div',{staticClass:\"f6 gray mb1\"},[_vm._v(\"質詢議員： \"+_vm._s(_vm.councilor.name))]),_c('div',{staticClass:\"f6 gray\"},[_vm._v(\"選舉區域： \"+_vm._s(_vm.district))])])]),_c('h2',{staticClass:\"f4 f3-ns fw5 ls4\"},[_vm._v(_vm._s(_vm.sayit.summary))]),_c('p',{staticClass:\"ls2\"},[_vm._v(_vm._s(_vm.sayit.say)+\"...\")]),(_vm.sayit.editorNote)?_c('p',{staticClass:\"ls2 f6 gray\"},[_vm._v(\"新芽補充： \"+_vm._s(_vm.sayit.editorNote))]):_vm._e(),_c('button',{staticClass:\"intCard__src plainButton flex justify-between w-100\",on:{\"click\":function($event){$event.stopPropagation();return _vm.gotoPdf.apply(null, arguments)}}},[_c('div',{staticClass:\"flex items-center f6 ls1\"},[_c('span',[_vm._v(\"來源出處：\")]),_c('div',{staticClass:\"intCard__round\"},[_vm._v(_vm._s(_vm.roundLabel))])]),(_vm.canViewPdf)?_c('div',{staticClass:\"flex items-center ls2 dn\"},[_c('div',{staticClass:\"intCard__more underline dn db-ns\"},[_vm._v(\"閱讀更多\")]),_c('tcw-icon',{staticClass:\"intCard__moreIcon dn db-ns ml2\",attrs:{\"icon\":\"chevron-right-black\"}}),_c('tcw-icon',{staticClass:\"intCard__moreIcon db dn-ns ml2\",attrs:{\"icon\":\"chevron-right-blue\"}})],1):_vm._e()])]),(_vm.canViewPdf)?_c('interpellation-src-viewer',{ref:\"srcViewer\",attrs:{\"start-page\":_vm.sayit.src[0],\"councilor-round\":_vm.sayit.councilorRound,\"meeting-round\":_vm.sayit.round,\"highlight\":_vm.sayit.say}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationCard.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { DEFAULT_ROUND } from '~/libs/defs'\nimport { number2zh } from '~/libs/utils'\nexport default {\n  props: {\n    councilorMap: {\n      type: Object,\n      required: true\n    },\n    sayit: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: {\n    councilor () {\n      return this.councilorMap[this.sayit.councilorId]\n    },\n    district () {\n      return `${this.councilor.districtTitle} | ${this.councilor.townList.join('.')}`\n    },\n    roundLabel () {\n      const councilorRound = number2zh(this.sayit.councilorRound || DEFAULT_ROUND)\n      const meetingRound = number2zh(this.sayit.round)\n      return `${councilorRound}屆第${meetingRound}次${this.sayit.type}`\n    },\n    canViewPdf () {\n      return !!this.sayit.src[0]\n    }\n  },\n  methods: {\n    gotoPdf () {\n      if (this.canViewPdf) {\n        this.$refs.srcViewer.show()\n      }\n    }\n  }\n}\n","import { render, staticRenderFns } from \"./InterpellationCard.vue?vue&type=template&id=e48ba6ba&scoped=true&lang=pug&\"\nimport script from \"./InterpellationCard.vue?vue&type=script&lang=js&\"\nexport * from \"./InterpellationCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InterpellationCard.vue?vue&type=style&index=0&id=e48ba6ba&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e48ba6ba\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {TcwIcon: require('/home/runner/work/tainan-council-watch/tainan-council-watch/tcw-ui/components/TcwIcon.vue').default,InterpellationSrcViewer: require('/home/runner/work/tainan-council-watch/tainan-council-watch/tcw-ui/components/InterpellationSrcViewer.vue').default})\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationSrcViewer.vue?vue&type=style&index=0&id=2952509c&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2cf11284\", content, true, {\"sourceMap\":false});","export * from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleInterpellationPdf.vue?vue&type=style&index=0&id=4dc5e1d9&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sip[data-v-4dc5e1d9]  .pdfViewer .page{box-sizing:content-box}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"page\",staticClass:\"sip pdfViewer\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleInterpellationPdf.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleInterpellationPdf.vue?vue&type=script&lang=js&\"","//\n//\n//\n\nconst DEFAULT_SCALE = 0.95\n\nexport default {\n  props: {\n    document: {\n      type: Object,\n      required: true\n    },\n    page: {\n      type: Number,\n      required: true\n    },\n    highlight: {\n      type: String,\n      default: ''\n    },\n    noScroll: {\n      type: Boolean,\n      default: true\n    }\n  },\n  mounted () {\n    this.renderPdf()\n  },\n  methods: {\n    renderPdf () {\n      const pdfjsViewer = window.pdfjsViewer\n\n      const eventBus = new pdfjsViewer.EventBus()\n\n      const viewerConfig = {\n        container: this.$refs.page.parentElement,\n        viewer: this.$refs.page,\n        eventBus\n      }\n\n      viewerConfig.linkService = new pdfjsViewer.PDFLinkService({\n        eventBus\n      })\n\n      if (this.highlight) {\n        viewerConfig.findController = new pdfjsViewer.PDFFindController({\n          eventBus,\n          linkService: viewerConfig.linkService\n        })\n      }\n\n      const pdfSinglePageViewer = new pdfjsViewer.PDFSinglePageViewer(viewerConfig)\n      viewerConfig.linkService.setViewer(pdfSinglePageViewer)\n\n      eventBus.on('pagesinit', () => {\n        pdfSinglePageViewer._setScale(DEFAULT_SCALE, this.noScroll)\n\n        if (this.highlight) {\n          // TODO: handle search not found\n          // console.warn('search', this.highlight)\n          eventBus.dispatch('find', {\n            type: '',\n            query: this.highlight,\n            phraseSearch: true,\n            highlightAll: true\n          })\n        } else {\n          const scrollEle = pdfSinglePageViewer.container.parentElement\n          const top = scrollEle.scrollTop\n          pdfSinglePageViewer.currentPageNumber = this.page\n          pdfSinglePageViewer.container.parentElement.scrollTo({ top })\n        }\n        this.$emit('loaded')\n      })\n\n      eventBus.on('updatetextlayermatches', () => {\n        if (pdfSinglePageViewer.currentPageNumber !== this.page) {\n          pdfSinglePageViewer._setCurrentPageNumber(this.page, !this.noScroll)\n        }\n      })\n\n      pdfSinglePageViewer.setDocument(this.document)\n      viewerConfig.linkService.setDocument(this.document, null)\n    }\n  }\n}\n","import { render, staticRenderFns } from \"./SingleInterpellationPdf.vue?vue&type=template&id=4dc5e1d9&scoped=true&lang=pug&\"\nimport script from \"./SingleInterpellationPdf.vue?vue&type=script&lang=js&\"\nexport * from \"./SingleInterpellationPdf.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SingleInterpellationPdf.vue?vue&type=style&index=0&id=4dc5e1d9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dc5e1d9\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationSrcViewer.vue?vue&type=style&index=0&id=2952509c&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".intViewer[data-v-2952509c]{position:fixed;left:0;right:0;top:0;bottom:0;z-index:1000;padding:2rem 0;overflow:auto;background:rgba(0,0,0,.6666666667)}@media screen and (min-width:60em){.intViewer[data-v-2952509c]{padding:2rem}}.intViewer__container[data-v-2952509c]{position:absolute;width:100vw;max-width:62rem;transform:translateX(-50%);left:50%;top:2rem;padding-bottom:2rem}.intViewer__close[data-v-2952509c]{position:-webkit-sticky;position:sticky;top:0;z-index:1;padding:0 1rem}.intViewer__close button[data-v-2952509c]{color:#999;padding:1rem}.intViewer .sip+.sip[data-v-2952509c]{margin-top:2rem}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationCard.vue?vue&type=style&index=0&id=e48ba6ba&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"84834464\", content, true, {\"sourceMap\":false});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"intViewer\",class:{db: _vm.isOpened, dn: !_vm.isOpened},on:{\"click\":_vm.hide}},[_c('b-loading',{attrs:{\"is-full-page\":true,\"active\":!_vm.isMainReady}}),(_vm.isMainReady)?_c('div',{staticClass:\"intViewer__container\"},[_c('div',{staticClass:\"intViewer__close flex justify-end\"},[_c('button',{staticClass:\"plainButton f4 cursor\",on:{\"click\":_vm.hide}},[_c('i',{staticClass:\"fas fa-times-circle\"})])]),_c('client-only',[(_vm.mainPage)?_c('infinite-loading',{attrs:{\"distance\":0,\"direction\":\"top\"},on:{\"infinite\":function($event){return _vm.loadMore(false, $event)}}},[_c('div',{attrs:{\"slot\":\"no-more\"},slot:\"no-more\"}),_c('div',{attrs:{\"slot\":\"no-results\"},slot:\"no-results\"})]):_vm._e()],1),_c('div',{staticClass:\"h3\"}),_vm._l((_vm.headPages),function(page){return _c('single-interpellation-pdf',_vm._b({key:page.id,on:{\"loaded\":function($event){return _vm.markLoadingDone(false)}},nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.handlePageClick.apply(null, arguments)}}},'single-interpellation-pdf',page.pdf,false))}),_c('single-interpellation-pdf',_vm._b({attrs:{\"no-scroll\":false},nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.handlePageClick.apply(null, arguments)}}},'single-interpellation-pdf',_vm.mainPage,false)),_vm._l((_vm.tailPages),function(page){return _c('single-interpellation-pdf',_vm._b({key:page.id,on:{\"loaded\":function($event){return _vm.markLoadingDone(true)}},nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.handlePageClick.apply(null, arguments)}}},'single-interpellation-pdf',page.pdf,false))}),_c('div',{staticClass:\"h3\"}),_c('client-only',[(_vm.mainPage)?_c('infinite-loading',{attrs:{\"distance\":0},on:{\"infinite\":function($event){return _vm.loadMore(true, $event)}}},[_c('div',{attrs:{\"slot\":\"no-more\"},slot:\"no-more\"}),_c('div',{attrs:{\"slot\":\"no-results\"},slot:\"no-results\"})]):_vm._e()],1),_c('div',{staticClass:\"h3\"})],2):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport InfiniteLoading from 'vue-infinite-loading'\n\nconst PDFJS_BASE = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@2.14.305'\nconst PDF_SRC_BASE = 'https://tainansprout.github.io/tainan-council-data/interpellation/round'\nconst PAGE_PER_CHUNK = 10\nconst RENDER_SLOWLY = 300\n\nconst CHECK_PDF_LIB_SOMETIME = 100\nconst MIN_SEARCH_LEN = 12\n\nexport default {\n  components: {\n    InfiniteLoading\n  },\n  props: {\n    startPage: {\n      type: Number,\n      required: true\n    },\n    councilorRound: {\n      type: String,\n      default: '3rd'\n    },\n    meetingRound: {\n      type: Number,\n      default: 1\n    },\n    meetingType: {\n      type: String,\n      default: 'regular'\n    },\n    highlight: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      isLibLoaded: false,\n      isPageMounted: false,\n      isOpenedPending: false,\n      isOpened: false,\n      pdfLibTimer: null,\n\n      pageChunk: {},\n\n      mainPage: null,\n\n      headPages: [],\n      headLoadingState: null,\n\n      tailPages: [],\n      tailLoadingState: null\n    }\n  },\n  head () {\n    return {\n      link: [{ rel: 'stylesheet', href: `${PDFJS_BASE}/web/pdf_viewer.css` }]\n    }\n  },\n  computed: {\n    isMainReady () {\n      return this.mainPage && this.isOpened\n    },\n    isRenderReady () {\n      return this.isPageMounted && this.isLibLoaded\n    },\n    pdfLinkBase () {\n      const meetingRoundStr = `${this.meetingRound}`.padStart(2, '0')\n      return `${PDF_SRC_BASE}/${this.councilorRound}/${this.meetingType}/${meetingRoundStr}`\n    },\n    highlightHead () {\n      let head = this.highlight.split(/[，。！？]/)[0]\n      if (head.length < MIN_SEARCH_LEN) {\n        head = this.highlight.slice(0, MIN_SEARCH_LEN)\n      }\n      return head\n    }\n  },\n  watch: {\n    isRenderReady () {\n      if (this.isOpenedPending) {\n        this.renderMainPage()\n        this.isOpenedPending = false\n      }\n    }\n  },\n  mounted () {\n    this.isLibLoaded = this.checkPdfLibReadiness()\n    this.isPageMounted = true\n  },\n  beforeDestroy () {\n    clearTimeout(this.pdfLibTimer)\n  },\n  methods: {\n    handlePageClick (e) {\n      // hide when not clicking pdf\n      if (!e.target.closest('.textLayer')) {\n        this.hide()\n      }\n    },\n    show () {\n      this.isOpened = true\n      if (!this.isRenderReady) {\n        this.isOpenedPending = true\n        // vue-meta onload trigger only once, we need to do it ourselves\n        this.keepCheckingPdfLibRediness()\n      } else {\n        this.$nextTick(() => {\n          this.renderMainPage()\n        })\n      }\n    },\n    hide () {\n      this.isOpened = false\n      this.isOpenedPending = false\n    },\n    checkPdfLibReadiness () {\n      return !!window && !!window.pdfjsLib && !!window.pdfjsViewer\n    },\n    keepCheckingPdfLibRediness () {\n      this.pdfLibTimer = setTimeout(() => {\n        this.isLibLoaded = this.checkPdfLibReadiness()\n        if (!this.isLibLoaded) {\n          this.keepCheckingPdfLibRediness()\n        } else {\n          window.pdfjsLib.GlobalWorkerOptions.workerSrc = `${PDFJS_BASE}/build/pdf.worker.js`\n        }\n      }, CHECK_PDF_LIB_SOMETIME)\n    },\n    async preparePdf (pageIndex) {\n      const pdfjsLib = window.pdfjsLib\n      const CMAP_URL = `${PDFJS_BASE}/cmaps/`\n\n      const pageOffset = pageIndex % PAGE_PER_CHUNK || PAGE_PER_CHUNK\n      const chunkIndex = this.getPageChunkIndex(pageIndex)\n\n      if (!this.pageChunk[chunkIndex]) {\n        this.pageChunk[chunkIndex] = pdfjsLib.getDocument({\n          url: `${this.pdfLinkBase}/${chunkIndex}.pdf`,\n          cMapUrl: CMAP_URL,\n          cMapPacked: true,\n          enableXfa: true\n        })\n      }\n\n      const pdfDocument = await this.pageChunk[chunkIndex].promise\n\n      return {\n        document: pdfDocument,\n        page: pageOffset\n      }\n    },\n    async renderMainPage () {\n      const pdf = await this.preparePdf(this.startPage)\n      let highlightHead = this.highlight.split(/[，。！？]/)[0]\n      if (highlightHead.length < MIN_SEARCH_LEN) {\n        highlightHead = this.highlight.slice(0, MIN_SEARCH_LEN)\n      }\n      pdf.highlight = highlightHead\n      this.mainPage = pdf\n    },\n    getPageChunkIndex (pageIndex) {\n      //  1 -> return 001\n      // 10 -> return 001\n      // 11 -> return 002\n      const chunkIndex = Math.ceil(pageIndex / PAGE_PER_CHUNK)\n      return `${chunkIndex}`.padStart(3, '0')\n    },\n    markLoadingDone (isTail) {\n      if (isTail && this.tailLoadingState) {\n        // TODO: handle end of pdf properly\n        this.tailLoadingState.loaded()\n        this.tailLoadingState = null\n      } else if (!isTail && this.headLoadingState) {\n        this.headLoadingState.loaded()\n        this.headLoadingState = null\n      }\n    },\n    async loadMore (isTail, $state) {\n      let nextPage = this.startPage\n      if (isTail) {\n        nextPage += this.tailPages.length + 1\n      } else {\n        nextPage = nextPage - this.headPages.length - 1\n      }\n      const pdf = await this.preparePdf(nextPage)\n      const page = {\n        id: nextPage,\n        pdf\n      }\n      setTimeout(() => {\n        if (isTail) {\n          this.tailPages.push(page)\n          this.tailLoadingState = $state\n        } else {\n          this.headPages.unshift(page)\n          this.headLoadingState = $state\n        }\n      }, RENDER_SLOWLY)\n    }\n  }\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationSrcViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationSrcViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InterpellationSrcViewer.vue?vue&type=template&id=2952509c&scoped=true&lang=pug&\"\nimport script from \"./InterpellationSrcViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./InterpellationSrcViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InterpellationSrcViewer.vue?vue&type=style&index=0&id=2952509c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2952509c\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {SingleInterpellationPdf: require('/home/runner/work/tainan-council-watch/tainan-council-watch/tcw-ui/components/SingleInterpellationPdf.vue').default})\n","export * from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationCard.vue?vue&type=style&index=0&id=e48ba6ba&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".intCard[data-v-e48ba6ba]{border-bottom:1px solid #979797;padding-bottom:1.25rem;margin-bottom:1.25rem}.intCard__meta[data-v-e48ba6ba]{margin-bottom:.75rem}.intCard__round[data-v-e48ba6ba]{color:#49b0d5;text-decoration:underline;-webkit-text-decoration-color:#49b0d5;text-decoration-color:#49b0d5}.intCard p[data-v-e48ba6ba]{margin:.75rem 0}.intCard p[data-v-e48ba6ba]:last-of-type{margin-bottom:1.25rem}@media screen and (min-width:30em){.intCard[data-v-e48ba6ba]{padding-bottom:4rem;margin-bottom:4rem}.intCard__meta[data-v-e48ba6ba]{margin-bottom:1.25rem}.intCard__round[data-v-e48ba6ba]{color:#00000f;text-decoration:none}.intCard p[data-v-e48ba6ba]{margin:1rem 0}.intCard p[data-v-e48ba6ba]:last-of-type{margin-bottom:2.25rem}.intCard:hover .intCard__src .intCard__more[data-v-e48ba6ba]{color:#49b0d5;-webkit-text-decoration-color:#49b0d5;text-decoration-color:#49b0d5}.intCard:hover .intCard__src .intCard__moreIcon.db-ns[data-v-e48ba6ba]{display:none}.intCard:hover .intCard__src .intCard__moreIcon.dn-ns[data-v-e48ba6ba]{display:block}}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n"],"sourceRoot":""}