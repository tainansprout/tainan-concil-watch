{"version":3,"sources":["webpack:///./components/SingleInterpellationPdf.vue?8b5a","webpack:///./components/InterpellationSrcViewer.vue?ed15","webpack:///./components/SingleInterpellationPdf.vue?ae77","webpack:///./components/SingleInterpellationPdf.vue?5ffb","webpack:///./components/SingleInterpellationPdf.vue","webpack:///./components/SingleInterpellationPdf.vue?6699","webpack:///./components/SingleInterpellationPdf.vue?13e5","webpack:///./components/InterpellationSrcViewer.vue?b6e4","webpack:///./components/InterpellationSrcViewer.vue?1280","webpack:///./components/InterpellationSrcViewer.vue","webpack:///./components/InterpellationSrcViewer.vue?e318","webpack:///./components/InterpellationSrcViewer.vue?d37f"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","push","props","document","type","Object","required","page","Number","highlight","String","noScroll","Boolean","mounted","this","renderPdf","methods","pdfjsViewer","window","eventBus","EventBus","viewerConfig","container","$refs","parentElement","viewer","linkService","PDFLinkService","findController","PDFFindController","pdfSinglePageViewer","PDFSinglePageViewer","setViewer","on","_setScale","dispatch","query","phraseSearch","highlightAll","top","scrollTop","currentPageNumber","scrollTo","$emit","_setCurrentPageNumber","setDocument","component","_c","_self","ref","staticClass","PDFJS_BASE","components","InfiniteLoading","startPage","councilorRound","DEFAULT_ROUND","meetingRound","meetingType","data","isLibLoaded","isPageMounted","isOpenedPending","isOpened","pdfLibTimer","pageChunk","mainPage","headPages","headLoadingState","tailPages","tailLoadingState","head","link","rel","href","computed","isMainReady","isRenderReady","pdfLinkBase","meetingRoundStr","padStart","highlightHead","split","length","slice","watch","renderMainPage","checkPdfLibReadiness","beforeDestroy","clearTimeout","handlePageClick","e","target","closest","hide","show","$nextTick","keepCheckingPdfLibRediness","pdfjsLib","setTimeout","GlobalWorkerOptions","workerSrc","preparePdf","pageIndex","CMAP_URL","pageOffset","chunkIndex","getPageChunkIndex","getDocument","url","cMapUrl","cMapPacked","enableXfa","promise","pdfDocument","pdf","Math","ceil","markLoadingDone","isTail","loaded","loadMore","$state","nextPage","id","unshift","_vm","class","db","dn","attrs","$event","slot","_e","_l","_b","key","nativeOn","stopPropagation","apply","arguments","installComponents","SingleInterpellationPdf"],"mappings":"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","file":"2c84bef.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleInterpellationPdf.vue?vue&type=style&index=0&id=4dc5e1d9&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4ac103e3\", content, true, {\"sourceMap\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationSrcViewer.vue?vue&type=style&index=0&id=1bbfa970&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"71b95d58\", content, true, {\"sourceMap\":false});","export * from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleInterpellationPdf.vue?vue&type=style&index=0&id=4dc5e1d9&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sip[data-v-4dc5e1d9] .pdfViewer .page{box-sizing:content-box}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","\nconst DEFAULT_SCALE = 0.95\n\nexport default {\n  props: {\n    document: {\n      type: Object,\n      required: true\n    },\n    page: {\n      type: Number,\n      required: true\n    },\n    highlight: {\n      type: String,\n      default: ''\n    },\n    noScroll: {\n      type: Boolean,\n      default: true\n    }\n  },\n  mounted () {\n    this.renderPdf()\n  },\n  methods: {\n    renderPdf () {\n      const pdfjsViewer = window.pdfjsViewer\n\n      const eventBus = new pdfjsViewer.EventBus()\n\n      const viewerConfig = {\n        container: this.$refs.page.parentElement,\n        viewer: this.$refs.page,\n        eventBus\n      }\n\n      viewerConfig.linkService = new pdfjsViewer.PDFLinkService({\n        eventBus\n      })\n\n      if (this.highlight) {\n        viewerConfig.findController = new pdfjsViewer.PDFFindController({\n          eventBus,\n          linkService: viewerConfig.linkService\n        })\n      }\n\n      const pdfSinglePageViewer = new pdfjsViewer.PDFSinglePageViewer(viewerConfig)\n      viewerConfig.linkService.setViewer(pdfSinglePageViewer)\n\n      eventBus.on('pagesinit', () => {\n        pdfSinglePageViewer._setScale(DEFAULT_SCALE, this.noScroll)\n\n        if (this.highlight) {\n          // TODO: handle search not found\n          // console.warn('search', this.highlight)\n          eventBus.dispatch('find', {\n            type: '',\n            query: this.highlight,\n            phraseSearch: true,\n            highlightAll: true\n          })\n        } else {\n          const scrollEle = pdfSinglePageViewer.container.parentElement\n          const top = scrollEle.scrollTop\n          pdfSinglePageViewer.currentPageNumber = this.page\n          pdfSinglePageViewer.container.parentElement.scrollTo({ top })\n        }\n        this.$emit('loaded')\n      })\n\n      eventBus.on('updatetextlayermatches', () => {\n        if (pdfSinglePageViewer.currentPageNumber !== this.page) {\n          pdfSinglePageViewer._setCurrentPageNumber(this.page, !this.noScroll)\n        }\n      })\n\n      pdfSinglePageViewer.setDocument(this.document)\n      viewerConfig.linkService.setDocument(this.document, null)\n    }\n  }\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleInterpellationPdf.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleInterpellationPdf.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SingleInterpellationPdf.vue?vue&type=template&id=4dc5e1d9&scoped=true&lang=pug&\"\nimport script from \"./SingleInterpellationPdf.vue?vue&type=script&lang=js&\"\nexport * from \"./SingleInterpellationPdf.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SingleInterpellationPdf.vue?vue&type=style&index=0&id=4dc5e1d9&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dc5e1d9\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationSrcViewer.vue?vue&type=style&index=0&id=1bbfa970&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".intViewer[data-v-1bbfa970]{position:fixed;left:0;right:0;top:0;bottom:0;z-index:1000;padding:2rem 0;overflow:auto;background:rgba(0,0,0,.66667)}@media screen and (min-width:60em){.intViewer[data-v-1bbfa970]{padding:2rem}}.intViewer__container[data-v-1bbfa970]{position:absolute;width:100vw;max-width:62rem;transform:translateX(-50%);left:50%;top:2rem;padding-bottom:2rem}.intViewer__close[data-v-1bbfa970]{position:sticky;top:0;z-index:1;padding:0 1rem}.intViewer__close button[data-v-1bbfa970]{color:#999;padding:1rem}.intViewer .sip+.sip[data-v-1bbfa970]{margin-top:2rem}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","\nimport InfiniteLoading from 'vue-infinite-loading'\nimport { DEFAULT_ROUND } from '~/libs/defs'\n\nconst PDFJS_BASE = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@2.14.305'\nconst PDF_SRC_BASE = 'https://tainansprout.github.io/tainan-council-data/interpellation/round'\nconst PAGE_PER_CHUNK = 10\nconst RENDER_SLOWLY = 300\n\nconst CHECK_PDF_LIB_SOMETIME = 100\nconst MIN_SEARCH_LEN = 12\n\nexport default {\n  components: {\n    InfiniteLoading\n  },\n  props: {\n    startPage: {\n      type: Number,\n      required: true\n    },\n    councilorRound: {\n      type: String,\n      default: DEFAULT_ROUND\n    },\n    meetingRound: {\n      type: Number,\n      default: 1\n    },\n    meetingType: {\n      type: String,\n      default: 'regular'\n    },\n    highlight: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      isLibLoaded: false,\n      isPageMounted: false,\n      isOpenedPending: false,\n      isOpened: false,\n      pdfLibTimer: null,\n\n      pageChunk: {},\n\n      mainPage: null,\n\n      headPages: [],\n      headLoadingState: null,\n\n      tailPages: [],\n      tailLoadingState: null\n    }\n  },\n  head () {\n    return {\n      link: [{ rel: 'stylesheet', href: `${PDFJS_BASE}/web/pdf_viewer.css` }]\n    }\n  },\n  computed: {\n    isMainReady () {\n      return this.mainPage && this.isOpened\n    },\n    isRenderReady () {\n      return this.isPageMounted && this.isLibLoaded\n    },\n    pdfLinkBase () {\n      const meetingRoundStr = `${this.meetingRound}`.padStart(2, '0')\n      return `${PDF_SRC_BASE}/${this.councilorRound}/${this.meetingType}/${meetingRoundStr}`\n    },\n    highlightHead () {\n      let head = this.highlight.split(/[，。！？]/)[0]\n      if (head.length < MIN_SEARCH_LEN) {\n        head = this.highlight.slice(0, MIN_SEARCH_LEN)\n      }\n      return head\n    }\n  },\n  watch: {\n    isRenderReady () {\n      if (this.isOpenedPending) {\n        this.renderMainPage()\n        this.isOpenedPending = false\n      }\n    }\n  },\n  mounted () {\n    this.isLibLoaded = this.checkPdfLibReadiness()\n    this.isPageMounted = true\n  },\n  beforeDestroy () {\n    clearTimeout(this.pdfLibTimer)\n  },\n  methods: {\n    handlePageClick (e) {\n      // hide when not clicking pdf\n      if (!e.target.closest('.textLayer')) {\n        this.hide()\n      }\n    },\n    show () {\n      this.isOpened = true\n      if (!this.isRenderReady) {\n        this.isOpenedPending = true\n        // vue-meta onload trigger only once, we need to do it ourselves\n        this.keepCheckingPdfLibRediness()\n      } else {\n        this.$nextTick(() => {\n          this.renderMainPage()\n        })\n      }\n    },\n    hide () {\n      this.isOpened = false\n      this.isOpenedPending = false\n    },\n    checkPdfLibReadiness () {\n      return !!window && !!window.pdfjsLib && !!window.pdfjsViewer\n    },\n    keepCheckingPdfLibRediness () {\n      this.pdfLibTimer = setTimeout(() => {\n        this.isLibLoaded = this.checkPdfLibReadiness()\n        if (!this.isLibLoaded) {\n          this.keepCheckingPdfLibRediness()\n        } else {\n          window.pdfjsLib.GlobalWorkerOptions.workerSrc = `${PDFJS_BASE}/build/pdf.worker.js`\n        }\n      }, CHECK_PDF_LIB_SOMETIME)\n    },\n    async preparePdf (pageIndex) {\n      const pdfjsLib = window.pdfjsLib\n      const CMAP_URL = `${PDFJS_BASE}/cmaps/`\n\n      const pageOffset = pageIndex % PAGE_PER_CHUNK || PAGE_PER_CHUNK\n      const chunkIndex = this.getPageChunkIndex(pageIndex)\n\n      if (!this.pageChunk[chunkIndex]) {\n        this.pageChunk[chunkIndex] = pdfjsLib.getDocument({\n          url: `${this.pdfLinkBase}/${chunkIndex}.pdf`,\n          cMapUrl: CMAP_URL,\n          cMapPacked: true,\n          enableXfa: true\n        })\n      }\n\n      const pdfDocument = await this.pageChunk[chunkIndex].promise\n\n      return {\n        document: pdfDocument,\n        page: pageOffset\n      }\n    },\n    async renderMainPage () {\n      const pdf = await this.preparePdf(this.startPage)\n      let highlightHead = this.highlight.split(/[，。！？]/)[0]\n      if (highlightHead.length < MIN_SEARCH_LEN) {\n        highlightHead = this.highlight.slice(0, MIN_SEARCH_LEN)\n      }\n      pdf.highlight = highlightHead\n      this.mainPage = pdf\n    },\n    getPageChunkIndex (pageIndex) {\n      //  1 -> return 001\n      // 10 -> return 001\n      // 11 -> return 002\n      const chunkIndex = Math.ceil(pageIndex / PAGE_PER_CHUNK)\n      return `${chunkIndex}`.padStart(3, '0')\n    },\n    markLoadingDone (isTail) {\n      if (isTail && this.tailLoadingState) {\n        // TODO: handle end of pdf properly\n        this.tailLoadingState.loaded()\n        this.tailLoadingState = null\n      } else if (!isTail && this.headLoadingState) {\n        this.headLoadingState.loaded()\n        this.headLoadingState = null\n      }\n    },\n    async loadMore (isTail, $state) {\n      let nextPage = this.startPage\n      if (isTail) {\n        nextPage += this.tailPages.length + 1\n      } else {\n        nextPage = nextPage - this.headPages.length - 1\n      }\n      const pdf = await this.preparePdf(nextPage)\n      const page = {\n        id: nextPage,\n        pdf\n      }\n      setTimeout(() => {\n        if (isTail) {\n          this.tailPages.push(page)\n          this.tailLoadingState = $state\n        } else {\n          this.headPages.unshift(page)\n          this.headLoadingState = $state\n        }\n      }, RENDER_SLOWLY)\n    }\n  }\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationSrcViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InterpellationSrcViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InterpellationSrcViewer.vue?vue&type=template&id=1bbfa970&scoped=true&lang=pug&\"\nimport script from \"./InterpellationSrcViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./InterpellationSrcViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InterpellationSrcViewer.vue?vue&type=style&index=0&id=1bbfa970&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1bbfa970\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {SingleInterpellationPdf: require('/home/runner/work/tainan-council-watch/tainan-council-watch/tcw-ui/components/SingleInterpellationPdf.vue').default})\n"],"sourceRoot":""}