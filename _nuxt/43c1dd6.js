(window.webpackJsonp=window.webpackJsonp||[]).push([[3,16,23],{368:function(t,e,n){"use strict";n.d(e,"e",(function(){return f})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return m})),n.d(e,"d",(function(){return v})),n.d(e,"c",(function(){return w}));n(14),n(32),n(128),n(240),n(241),n(63),n(97),n(36),n(243),n(79);var r=n(369),o=n.n(r),c=n(96),d=n(370),l=d.a.reduce((function(t,e){return t[e.abbr||e.name]=e,t}),{});function f(t){var e=t.join(".");return e.endsWith("區")||(e+="區"),e}function h(t){if(t){if(t.name&&t.avatar)return t;var e=l[t];if(e||(e=d.a.find((function(p){return p.name===t}))),!e)throw new Error("Undefined party: ".concat(t));return e}}function m(t){return o()(t).format("YYYY.MM.DD")}function v(t){if(t){var e=t.offsetTop-c.e;setTimeout((function(){window.scrollTo({top:e,behavior:"smooth"})}))}}function w(t){var e=/st|nd|rd|th/,n=(t=t.toString()).match(e);t=t.replace(e,"");var r=c.g[t];if(!r)throw new Error("Undefined number: ".concat(t));return n?"第".concat(r):r}},370:function(t){t.exports=JSON.parse('{"a":[{"name":"中國國民黨","abbr":"國民黨","avatar":"/content-img/party-國.png"},{"name":"民主進步黨","abbr":"民進黨","avatar":"/content-img/party-民.png"},{"name":"台灣團結聯盟","avatar":"/content-img/party-台.png"},{"name":"無黨籍","avatar":"/content-img/party-無.png"},{"name":"台灣基進","avatar":"/content-img/party-基.png"},{"name":"時代力量","avatar":"/content-img/party-時.png"},{"name":"新黨","avatar":"/content-img/party-新.png"},{"name":"台灣民眾黨","avatar":"/content-img/party-眾.png"},{"name":"綠黨","avatar":"/content-img/party-綠.png"}]}')},391:function(t,e,n){var content=n(422);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(34).default)("83b0c7d8",content,!0,{sourceMap:!1})},397:function(t,e,n){"use strict";n.r(e);n(78),n(128);var defs=n(96),r=n(368),o={props:{councilorMap:{type:Object,required:!0},sayit:{type:Object,required:!0}},computed:{councilor:function(){return this.councilorMap[this.sayit.councilorId]},district:function(){return"".concat(this.councilor.districtTitle," | ").concat(this.councilor.townList.join("."))},roundLabel:function(){var t=Object(r.c)(this.sayit.councilorRound||defs.b),e=Object(r.c)(this.sayit.round);return"".concat(t,"屆第").concat(e,"次").concat(this.sayit.type)}},methods:{gotoPdf:function(){this.$refs.srcViewer.show()}}},c=(n(582),n(27)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"intCard pointer",on:{click:t.gotoPdf}},[n("div",{staticClass:"intCard__meta flex-ns flex-row-reverse justify-between ls3"},[n("div",{staticClass:"f6 gray"},[t._v(t._s(t.sayit.date))]),n("div",{staticClass:"mt3 mt0-ns"},[n("div",{staticClass:"f6 gray mb1"},[t._v("質詢議員： "+t._s(t.councilor.name))]),n("div",{staticClass:"f6 gray"},[t._v("選舉區域： "+t._s(t.district))])])]),n("h2",{staticClass:"f4 f3-ns fw5 ls4"},[t._v(t._s(t.sayit.summary))]),n("p",{staticClass:"ls2"},[t._v(t._s(t.sayit.say)+"...")]),t.sayit.editorNote?n("p",{staticClass:"ls2 f6 gray"},[t._v("新芽補充： "+t._s(t.sayit.editorNote))]):t._e(),n("button",{staticClass:"intCard__src plainButton flex justify-between w-100",on:{click:function(e){return e.stopPropagation(),t.gotoPdf.apply(null,arguments)}}},[n("div",{staticClass:"flex items-center f6 ls1"},[n("span",[t._v("來源出處：")]),n("div",{staticClass:"intCard__round"},[t._v(t._s(t.roundLabel))])]),n("div",{staticClass:"flex items-center ls2 dn"},[n("div",{staticClass:"intCard__more underline dn db-ns"},[t._v("閱讀更多")]),n("tcw-icon",{staticClass:"intCard__moreIcon dn db-ns ml2",attrs:{icon:"chevron-right-black"}}),n("tcw-icon",{staticClass:"intCard__moreIcon db dn-ns ml2",attrs:{icon:"chevron-right-blue"}})],1)])]),n("interpellation-src-viewer",{ref:"srcViewer",attrs:{"start-page":t.sayit.src[0],"councilor-round":t.sayit.councilorRound,"meeting-round":t.sayit.round,highlight:t.sayit.say}})],1)}),[],!1,null,"afbc2742",null);e.default=component.exports;installComponents(component,{TcwIcon:n(242).default,InterpellationSrcViewer:n(498).default})},420:function(t,e,n){var content=n(455);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(34).default)("234a3fcc",content,!0,{sourceMap:!1})},421:function(t,e,n){"use strict";n(391)},422:function(t,e,n){var r=n(33)(!1);r.push([t.i,".sip[data-v-7ed7fb02]  .pdfViewer .page{box-sizing:content-box}",""]),t.exports=r},433:function(t,e,n){"use strict";n.r(e);n(381);var r={props:{document:{type:Object,required:!0},page:{type:Number,required:!0},highlight:{type:String,default:""},noScroll:{type:Boolean,default:!0}},mounted:function(){this.renderPdf()},methods:{renderPdf:function(){var t=this,e=window.pdfjsViewer,n=new e.EventBus,r={container:this.$refs.page.parentElement,viewer:this.$refs.page,eventBus:n};r.linkService=new e.PDFLinkService({eventBus:n}),this.highlight&&(r.findController=new e.PDFFindController({eventBus:n,linkService:r.linkService}));var o=new e.PDFSinglePageViewer(r);r.linkService.setViewer(o),n.on("pagesinit",(function(){o._setScale(.95,t.noScroll),t.highlight?n.dispatch("find",{type:"",query:t.highlight,phraseSearch:!0,highlightAll:!0}):o._setCurrentPageNumber(t.page,!t.noScroll),t.$emit("loaded")})),n.on("updatetextlayermatches",(function(){o.currentPageNumber!==t.page&&o._setCurrentPageNumber(t.page,!t.noScroll)})),o.setDocument(this.document),r.linkService.setDocument(this.document,null)}}},o=(n(421),n(27)),component=Object(o.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"page",staticClass:"sip pdfViewer"})}),[],!1,null,"7ed7fb02",null);e.default=component.exports},454:function(t,e,n){"use strict";n(420)},455:function(t,e,n){var r=n(33)(!1);r.push([t.i,".intViewer[data-v-10999beb]{position:fixed;left:0;right:0;top:0;bottom:0;z-index:1000;padding:2rem 0;overflow:auto;background:rgba(0,0,0,.6666666667)}@media screen and (min-width:60em){.intViewer[data-v-10999beb]{padding:2rem}}.intViewer__container[data-v-10999beb]{position:absolute;width:100vw;max-width:62rem;transform:translateX(-50%);left:50%;top:2rem;padding-bottom:2rem}.intViewer__close[data-v-10999beb]{position:-webkit-sticky;position:sticky;top:0;z-index:1;padding:0 1rem}.intViewer__close button[data-v-10999beb]{color:#999;padding:1rem}.intViewer .sip+.sip[data-v-10999beb]{margin-top:2rem}",""]),t.exports=r},488:function(t,e,n){var content=n(583);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(34).default)("662480f2",content,!0,{sourceMap:!1})},498:function(t,e,n){"use strict";n.r(e);n(38),n(35),n(44),n(14),n(49),n(37),n(50);var r=n(12),o=n(20),c=(n(64),n(381),n(489),n(78),n(36),n(159),n(54),n(63),n(417));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f="//cdn.jsdelivr.net/npm/pdfjs-dist@2.14.305",h={components:{InfiniteLoading:n.n(c).a},props:{startPage:{type:Number,required:!0},councilorRound:{type:String,default:"3th"},meetingRound:{type:Number,default:1},meetingType:{type:String,default:"regular"},highlight:{type:String,default:""}},data:function(){return{isLibLoaded:!1,isPageMounted:!1,isOpenedPending:!1,isOpened:!1,pdfLibTimer:null,pageChunk:{},mainPage:null,headPages:[],headLoadingState:null,tailPages:[],tailLoadingState:null}},head:function(){var t={skip:this.isLibLoaded,once:!0};return{link:[{rel:"stylesheet",href:"".concat(f,"/web/pdf_viewer.css")}],script:[l(l({hid:"pdf-js"},t),{},{src:"".concat(f,"/build/pdf.js")}),l(l({hid:"pdf-viewer-js"},t),{},{src:"".concat(f,"/web/pdf_viewer.js"),callback:this.initPdfLibSetting})]}},computed:{isRenderReady:function(){return this.isPageMounted&&this.isLibLoaded},pdfLinkBase:function(){var t="".concat(this.meetingRound).padStart(2,"0");return"".concat("https://tainansprout.github.io/tainan-council-data/interpellation/round","/").concat(this.councilorRound,"/").concat(this.meetingType,"/").concat(t)},highlightHead:function(){var head=this.highlight.split(/[，。！？]/)[0];return head.length<12&&(head=this.highlight.slice(0,12)),head}},watch:{isRenderReady:function(){this.isOpenedPending&&(this.renderMainPage(),this.isOpenedPending=!1)}},mounted:function(){this.isLibLoaded=this.checkPdfLibReadiness(),this.isPageMounted=!0},beforeDestroy:function(){clearTimeout(this.pdfLibTimer)},methods:{initPdfLibSetting:function(){this.isLibLoaded=!0,window.pdfjsLib.GlobalWorkerOptions.workerSrc="".concat(f,"/build/pdf.worker.js")},handlePageClick:function(t){t.target.closest(".textLayer")||this.hide()},show:function(){var t=this;this.isOpened=!0,this.isRenderReady?this.$nextTick((function(){t.renderMainPage()})):(this.isOpenedPending=!0,this.keepCheckingPdfLibRediness())},hide:function(){this.isOpened=!1,this.isOpenedPending=!1},checkPdfLibReadiness:function(){return!!window&&!!window.pdfjsLib&&!!window.pdfjsViewer},keepCheckingPdfLibRediness:function(){var t=this;this.pdfLibTimer=setTimeout((function(){t.isLibLoaded=t.checkPdfLibReadiness(),t.isLibLoaded||t.keepCheckingPdfLibRediness()}),100)},preparePdf:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,d,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.pdfjsLib,o="".concat(f,"/cmaps/"),c=t%10||10,d=e.getPageChunkIndex(t),e.pageChunk[d]||(e.pageChunk[d]=r.getDocument({url:"".concat(e.pdfLinkBase,"/").concat(d,".pdf"),cMapUrl:o,cMapPacked:!0,enableXfa:!0})),n.next=7,e.pageChunk[d].promise;case 7:return l=n.sent,n.abrupt("return",{document:l,page:c});case 9:case"end":return n.stop()}}),n)})))()},renderMainPage:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.preparePdf(t.startPage);case 2:n=e.sent,(r=t.highlight.split(/[，。！？]/)[0]).length<12&&(r=t.highlight.slice(0,12)),n.highlight=r,t.mainPage=n;case 7:case"end":return e.stop()}}),e)})))()},getPageChunkIndex:function(t){var e=Math.ceil(t/10);return"".concat(e).padStart(3,"0")},markLoadingDone:function(t){t&&this.tailLoadingState?(this.tailLoadingState.loaded(),this.tailLoadingState=null):!t&&this.headLoadingState&&(this.headLoadingState.loaded(),this.headLoadingState=null)},loadMore:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o,c,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n.startPage,t?o+=n.tailPages.length+1:o=o-n.headPages.length-1,r.next=4,n.preparePdf(o);case 4:c=r.sent,d={id:o,pdf:c},setTimeout((function(){t?(n.tailPages.push(d),n.tailLoadingState=e):(n.headPages.unshift(d),n.headLoadingState=e)}),300);case 7:case"end":return r.stop()}}),r)})))()}}},m=(n(454),n(27)),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"intViewer",class:{db:t.isOpened,dn:!t.isOpened},on:{click:t.hide}},[t.mainPage&&t.isOpened?n("div",{staticClass:"intViewer__container"},[n("div",{staticClass:"intViewer__close flex justify-end"},[n("button",{staticClass:"plainButton f4 cursor",on:{click:t.hide}},[n("i",{staticClass:"fas fa-times-circle"})])]),n("client-only",[t.mainPage?n("infinite-loading",{attrs:{distance:0,direction:"top"},on:{infinite:function(e){return t.loadMore(!1,e)}}},[n("div",{attrs:{slot:"no-more"},slot:"no-more"}),n("div",{attrs:{slot:"no-results"},slot:"no-results"})]):t._e()],1),n("div",{staticClass:"h3"}),t._l(t.headPages,(function(e){return n("single-interpellation-pdf",t._b({key:e.id,on:{loaded:function(e){return t.markLoadingDone(!1)}},nativeOn:{click:function(e){return e.stopPropagation(),t.handlePageClick.apply(null,arguments)}}},"single-interpellation-pdf",e.pdf,!1))})),n("single-interpellation-pdf",t._b({attrs:{"no-scroll":!1},nativeOn:{click:function(e){return e.stopPropagation(),t.handlePageClick.apply(null,arguments)}}},"single-interpellation-pdf",t.mainPage,!1)),t._l(t.tailPages,(function(e){return n("single-interpellation-pdf",t._b({key:e.id,on:{loaded:function(e){return t.markLoadingDone(!0)}},nativeOn:{click:function(e){return e.stopPropagation(),t.handlePageClick.apply(null,arguments)}}},"single-interpellation-pdf",e.pdf,!1))})),n("div",{staticClass:"h3"}),n("client-only",[t.mainPage?n("infinite-loading",{attrs:{distance:0},on:{infinite:function(e){return t.loadMore(!0,e)}}},[n("div",{attrs:{slot:"no-more"},slot:"no-more"}),n("div",{attrs:{slot:"no-results"},slot:"no-results"})]):t._e()],1),n("div",{staticClass:"h3"})],2):t._e()])}),[],!1,null,"10999beb",null);e.default=component.exports;installComponents(component,{SingleInterpellationPdf:n(433).default})},582:function(t,e,n){"use strict";n(488)},583:function(t,e,n){var r=n(33)(!1);r.push([t.i,".intCard[data-v-afbc2742]{border-bottom:1px solid #979797;padding-bottom:1.25rem;margin-bottom:1.25rem}.intCard__meta[data-v-afbc2742]{margin-bottom:.75rem}.intCard__round[data-v-afbc2742]{color:#49b0d5;text-decoration:underline;-webkit-text-decoration-color:#49b0d5;text-decoration-color:#49b0d5}.intCard p[data-v-afbc2742]{margin:.75rem 0}.intCard p[data-v-afbc2742]:last-of-type{margin-bottom:1.25rem}@media screen and (min-width:30em){.intCard[data-v-afbc2742]{padding-bottom:4rem;margin-bottom:4rem}.intCard__meta[data-v-afbc2742]{margin-bottom:1.25rem}.intCard__round[data-v-afbc2742]{color:#00000f;text-decoration:none}.intCard p[data-v-afbc2742]{margin:1rem 0}.intCard p[data-v-afbc2742]:last-of-type{margin-bottom:2.25rem}.intCard:hover .intCard__src .intCard__more[data-v-afbc2742]{color:#49b0d5;-webkit-text-decoration-color:#49b0d5;text-decoration-color:#49b0d5}.intCard:hover .intCard__src .intCard__moreIcon.db-ns[data-v-afbc2742]{display:none}.intCard:hover .intCard__src .intCard__moreIcon.dn-ns[data-v-afbc2742]{display:block}}",""]),t.exports=r}}]);